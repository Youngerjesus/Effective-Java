## 아이템 5 - 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라

***

대부분 많은 클래스는 하나 이상의 자원을 필요로 한다. 

하지만 이 경우에 한 종류의 자원을 사용한다는 법칙이 없으면 이 방식은 유연하지 못하다. 테스트하기 어렵다. 
__사용되는 자원에 따라 동작이 달라지는 클래스는 정적 유틸리티 클래스나 싱글톤에는 적합하지 않다. 오히려 사전에 따른 여러가지 인스턴스가
만들어져야 하는게 더 직관적이다.__ 

예로 맞춤법 검사라는 SpellChecker 가 있는데 필요한 자원은 사전이다. 이 SpellChecker 가 한 종류의 사전만
지원하는건 효율성이 좋지 않다. 여러 경우에 대응하기 어렵다.

그렇다고해서 사전을 바꿀 수 있도록 하는 건 멀티스레드 방식에서 좋지 않다.

이 모든걸 해결하는 방법이 바로 인스턴스를 생성할 때 생성자에 필요한 자원을 모두 넘겨주는 의존성 주입이다. 

##### 의존성 주입 예 - SpellChecker

````java
public class SpellChecker {
    private final Lexicon dictionary;

    public SpellChecker(Lexicon dictionary) {
        this.dictionary = dictionary;
    }

    // 내부 구현은 표현하지 않겠습니다.
    public boolean isValid(String word) {return true;}
    public List<String> suggestions(String type){ return null;}
}
```` 

- 의존 객체 주입은 타입만 같다면 어떠한 객체든지 받을 수 있다. 그리고 생성자 주입이므로 객체가 변경될 여지가 없다. 불변성을 보장한다. 

이런 패턴의 응용으로 생성자에 팩토리를 넣어주는 방법이 있다. 

팩토리를 넘겨줘서 팩토리 메소드 법칙에 따라 관련 객체를 생성해주는 역할을 한다. 자바 8에서는 Supplier 와 유사한 역할이다. 

의존 객체 주입의 단점은 의존성이 여러개가 되는 클래스가 있으면 이를 일일히 다 의존성 주입 해주기가 어렵다는 단점이 있다. 하지만 이도 스프링같은 프레임워크의 도움을 받는다면 어렵지 않다. 
 

